<% if @book.errors.any? %>
	<div>
		<div>
			<%= pluralize(@book.errors.count,"error") %> prohibited this obj from being saved:
		</div>

		<% @book.errors.full_messages.each do |message| %>
		<div>
			<%= message %>
		</div>
	</div>
	<% end %>
	<% end %>
<div class="container">
	<div class="row">
		<div class= "col-xs-3">
			<%= render"users/sidebar" ,book:@book %>
		</div>

		<div class="col-xs-9">
			<h1>Books</h1>
			<table class="table table-inverse">
				<thead>
					<tr>
						<th></th>
						<th>Title</th>
						<th>Opinion</th>
						<th>いいね</th>
						<th>コメント</th>
					</tr>
				</thead>
				<% @books.each do |book| %>
				<tbody>
						<tr>
							<td>
								<%= link_to user_path(book.user_id) do%>
									<%= attachment_image_tag book.user, :profile_image, size: "60x60",fallback:"HpGJ--S9_400x400.jpg" %>
								<% end %>
							</td>
							<td><%= link_to book.title,book_path(book.id) %></td>
							<td><%= book.body%></td>
							<% if current_user.already_favorited?(book) %>
								<td>
									<%= link_to book_favorite_path(id: book.id, book_id: book.id), method: :delete do %>
										<i class="fas fa-heart"></i><%= book.favorites.count %>
									<% end %>
								</td>
							<% else %>
								<td>
									<%= link_to book_favorites_path(id: book.id, book_id: book.id) ,method: :post do %>
										<i class="far fa-heart"></i><%= book.favorites.count %>
									<% end %>
							    </td>
							<% end %>
							<td><%= book.comments.count %>件</td>
						</tr>
				</tbody>
				<% end %>
			</table>
		</div>
	</div>
</div>